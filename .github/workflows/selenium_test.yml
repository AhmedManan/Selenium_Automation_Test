name: Python Selenium Tests

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:

jobs:
  test:
    # Set a timeout in case tests hang
    timeout-minutes: 15
    # Use a fresh Ubuntu runner machine
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ”‘ Checkout repository
      uses: actions/checkout@v4

    - name: ğŸ’» Set up Python
      # A stable Python version
      uses: actions/setup-python@v5
      with:
        python-version: '3.x'

    - name: ğŸ”§ Install Python Dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt 

    - name: ğŸŒ Install Google Chrome Browser
      run: |
        sudo apt-get update
        sudo apt-get install -y google-chrome-stable

    - name: â–¶ï¸ Run Selenium tests with Pytest
      run: pytest --html=selenium-report/index.html --self-contained-html

    - name: â¬†ï¸ Upload Test Report (Artifact)
      uses: actions/upload-artifact@v4
      if: ${{ always() }}
      with:
        name: selenium-test-report
        path: selenium-report/
        retention-days: 30